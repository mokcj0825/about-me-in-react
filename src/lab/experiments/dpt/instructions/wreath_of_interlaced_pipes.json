{
  "id": "wreath_of_interlaced_pipes_test",
  "name": "Wreath of Interlaced Pipes Survival Test",
  "description": "Demonstrates the survival mechanism of Wreath of Interlaced Pipes blessing",
  "setup": {
    "blessings": ["wreath_of_interlaced_pipes"],
    "player_units": [
      {
        "id": "player_1",
        "name": "Test Subject A",
        "hp": 1000,
        "maxHp": 1000,
        "energy": 100,
        "maxEnergy": 200,
        "spd": 100,
        "strategy": {
          "type": "passive",
          "actions": [
            {
              "type": "wait"
            }
          ]
        }
      },
      {
        "id": "player_2",
        "name": "Test Subject B",
        "hp": 1000,
        "maxHp": 1000,
        "energy": 100,
        "maxEnergy": 200,
        "spd": 100,
        "strategy": {
          "type": "passive",
          "actions": [
            {
              "type": "wait"
            }
          ]
        }
      }
    ],
    "enemy_units": [
      {
        "id": "enemy_1",
        "name": "Damage Dealer A",
        "hp": 1000,
        "maxHp": 1000,
        "attack": 99999,
        "spd": 200,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "attack",
              "target": "player_1"
            }
          ]
        }
      },
      {
        "id": "enemy_2",
        "name": "Damage Dealer B",
        "hp": 1000,
        "maxHp": 1000,
        "attack": 99999,
        "spd": 200,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "attack",
              "target": "player_2"
            }
          ]
        }
      }
    ]
  },
  "validation": {
    "success_conditions": [
      "First attacked player unit should not be knocked out",
      "First attacked player unit's energy should be consumed",
      "First attacked player unit should recover HP equal to 50% of consumed energy",
      "Second attacked player unit should be knocked out (blessing already used)",
      "No energy consumption or HP recovery for second attacked unit"
    ],
    "edge_cases": [
      "Blessing should only work once per team",
      "HP recovery should not exceed maxHp",
      "Energy consumption should not go below 0",
      "Blessing should work regardless of attack order"
    ]
  }
}
