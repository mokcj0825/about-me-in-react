{
  "id": "garment_of_coiled_wires_test",
  "name": "Garment of Coiled Wires Recovery Test",
  "description": "Demonstrates the HP recovery mechanism of Garment of Coiled Wires blessing after ultimate cast",
  "setup": {
    "blessings": ["garment_of_coiled_wires"],
    "player_units": [
      {
        "id": "player_1",
        "name": "Test Subject A",
        "hp": 400,
        "maxHp": 1000,
        "energy": 120,
        "maxEnergy": 120,
        "attack": 100,
        "spd": 100,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "ultimate",
              "energy_threshold": 100
            },
            {
              "type": "wait"
            }
          ]
        }
      },
      {
        "id": "player_2",
        "name": "Test Subject B",
        "hp": 500,
        "maxHp": 1000,
        "energy": 120,
        "maxEnergy": 120,
        "attack": 100,
        "spd": 100,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "ultimate",
              "energy_threshold": 100
            },
            {
              "type": "wait"
            }
          ]
        }
      }
    ],
    "enemy_units": [
      {
        "id": "enemy_1",
        "name": "Damage Dealer A",
        "hp": 1000,
        "maxHp": 1000,
        "attack": 100,
        "spd": 90,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "attack",
              "target": "player_1"
            },
            {
              "type": "attack",
              "target": "player_2"
            }
          ]
        }
      },
      {
        "id": "enemy_2",
        "name": "Damage Dealer B",
        "hp": 1000,
        "maxHp": 1000,
        "attack": 100,
        "spd": 90,
        "strategy": {
          "type": "aggressive",
          "actions": [
            {
              "type": "attack",
              "target": "player_2"
            },
            {
              "type": "attack",
              "target": "player_1"
            }
          ]
        }
      }
    ]
  },
  "validation": {
    "success_conditions": [
      "Player unit's energy is fully consumed (0/120) after ultimate",
      "Player unit's HP increases by 16% of max HP when ultimate is used",
      "Blessing effect triggers immediately after ultimate cast",
      "Blessing persists across turns and can trigger multiple times"
    ],
    "edge_cases": [
      "Blessing should trigger even if unit is at full HP",
      "HP recovery should not exceed maxHp",
      "HP recovery amount is based on maxHp, not current HP",
      "Blessing should work for all player units",
      "Blessing should trigger every time an ultimate is used"
    ]
  }
}
